{"default_url":null,"content":{"state":3,"taskInstructions":"<h2><b>Instructions</b></h2><br>Identify internet facing third party applications being used by the company that accept their federated/manager domain credentials.<br><br><h2><b>Variation: Unauthenticated</b></h2><br>1. Perform google searches relate to the domains and know sso landing pages.<br><h3>Examples:</h3><br><code>inurl:adfs/ls/IdpInitiatedSignOn.aspx site: clientdomain.com<br>inurl:/idp/startSSO.ping?PartnerSpId= site: clientdomain.com<br></code><br>2.  Review DNS TXT records for validation tokens that can indicate third part websites being used. Details can be found on in the blog at:<br><code>https://blog.netspi.com/analyzing-dns-txt-records-to-fingerprint-service-providers/.<br></code><br><h3>Example PowerShell Command:</h3><br><code>&#35; Load Resolve-DnsDomainValidationToken into the PowerShell session<br>IEX(New-Object System.Net.WebClient).DownloadString(&quot;https://raw.githubusercontent.com/NetSPI/PowerShell/master/Resolve-DnsDomainValidationToken.ps1&quot;)<br><br>&#35; Run Resolve-DnsDomainValidationToken to collect and fingerprint TXT records<br>$Results = Resolve-DnsDomainValidationToken -Verbose -Domain adroll.com <br><br>&#35; View records in the console<br>$Results<br></code><br>3. Conduct brute forcing of known subdomains/URL paths on third party sites. For example, slack, salesforce, servicenow, aws, sharepoint.com, etc.<br><br><b>Note:</b> This is an area that we need to do more research and build automation for.<br><br><h2><b>Variation: Authenticated</b></h2><br>1. Download the SPNs from azure to get a list of 3rd party size that support sso. This can be done using Microburst. Review the source code for additional instructions on how to connect to the subscription.<br><code>IEX(New-Object System.Net.WebClient).DownloadString(&quot;https://raw.githubusercontent.com/NetSPI/MicroBurst/2bbdeb56babe2cfabb7d10cf64b97eb55c9765c3/Az/Get-AzDomainInfo.ps1&quot;)<br>Get-AzDomainInfo -folder MicroBurst -Verbose<br></code><br><h3><b>Additional Links</b></h3><br><code>https://www.nccgroup.trust/uk/about-us/newsroom-and-events/blogs/2018/april/introducing-azucar/<br></code><br>","references":[],"isTaskInstructionsVisible":true,"isCommentMandatory":false,"fields":[],"masterFinding":null}}